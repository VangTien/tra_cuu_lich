async function getAllHolidays() {
    const year = document.getElementById("yearInput").value.trim();
    const filter = document.getElementById("holidayFilter").value;
    if (!/^\d+$/.test(year)) {
        alert("Vui lÃ²ng nháº­p má»™t nÄƒm há»£p lá»‡!");
        return;
    }

    const resultsContainer = document.getElementById("results");
    resultsContainer.innerHTML = "";

    const traditionalHolidays = getTraditionalHolidays(year);
    const currentDate = new Date();
    const totalDays = getDaysInYear(Number(year));

    const daysInYearDiv = document.createElement("div");
    daysInYearDiv.className = "holiday-card";
    daysInYearDiv.innerHTML = ` 
        <div class="holiday-details">
            <div class="date-info">ğŸ“† NÄƒm ${year} cÃ³ tá»•ng cá»™ng: ${totalDays} ngÃ y</div>
        </div>
    `;
    resultsContainer.appendChild(daysInYearDiv);

    try {
        const response = await fetch(`https://date.nager.at/api/v3/PublicHolidays/${year}/VN`);
        const publicHolidays = response.ok ? await response.json() : [];
        const importantHolidays = ["Táº¿t NguyÃªn ÄÃ¡n", "NgÃ y Quá»‘c KhÃ¡nh Viá»‡t Nam"];
        
        // Káº¿t há»£p cÃ¡c ngÃ y lá»…, Ä‘áº£m báº£o khÃ´ng bá»‹ trÃ¹ng láº·p
        const allHolidays = [...publicHolidays, ...traditionalHolidays];
        
        // Lá»c ngÃ y lá»… trÃ¹ng láº·p theo tÃªn
        const uniqueHolidays = allHolidays.filter((holiday, index, self) => 
            index === self.findIndex((t) => (
                t.localName === holiday.localName && t.date === holiday.date
            ))
        );

        uniqueHolidays.forEach(holiday => {
            const date = new Date(holiday.date);
            const gregorianDate = date.toLocaleDateString("vi-VN", {
                weekday: "long",
                day: "2-digit",
                month: "2-digit",
                year: "numeric"
            });
            const lunarDate = convertToLunarDate(date);
            const daysRemaining = Math.ceil((date - currentDate) / (1000 * 60 * 60 * 24));
            const isImportant = importantHolidays.includes(holiday.localName);

            if (daysRemaining <= 0) {
                return;
            }

            // Lá»c ngÃ y lá»… theo loáº¡i
            if (filter !== 'all' && (filter === 'important' && !isImportant) || (filter === 'traditional' && isImportant)) {
                return;
            }

            const holidayDiv = document.createElement("div");
            holidayDiv.className = `holiday-card ${isImportant ? 'important-holiday' : ''}`;
            holidayDiv.innerHTML = `
                <div class="holiday-details">
                    <div class="date-info">ğŸ“… ${gregorianDate} (Ã‚m lá»‹ch: ${lunarDate})</div>
                    <div class="name-info">ğŸ‰ ${holiday.localName}</div>
                    <div class="countdown-info">â³ CÃ²n ${daysRemaining} ngÃ y</div>
                </div>
                <div class="description-info">ğŸ“– ${holiday.description || "KhÃ´ng cÃ³ mÃ´ táº£."}</div>
            `;
            resultsContainer.appendChild(holidayDiv);
        });
    } catch (error) {
        alert(`Lá»—i káº¿t ná»‘i: ${error.message}`);
    }
}
